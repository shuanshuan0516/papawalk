<!DOCTYPE html>
<html>
<head>
    <script src='https://cdn.firebase.com/js/client/1.0.17/firebase.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script>
    <script src="https://www.gstatic.com/firebasejs/5.4.1/firebase.js"></script>
</head>

<body background="C:\Users\99\background.jpg">
<style type="text/css">
	
#background
{ 
background-color:rgba(255,255,255,0.2);
border: 2px solid rgba(105,105,105,0.6); 


width: 50%;
height: 550px;
border-radius: 30px; 

font-size: 30px;

}

#line{

	background-color:rgba(255,255,255,0.2);
	border: :100px solid rgba(105,105,105,0.6);
	height: 0px;
	width: 70%;
}

body{
	justify-content: center;
	align-items: center;
	display: flex;
}

body,html{
	height: 100%;
	width: 100%;
}

.draw{
  height: 28px ;
  width:200px; 
  font-size: 15px;
   background-color: transparent; 
   border-radius: 8px; 
   border: 2px solid rgba(105,105,105,0.6);
}
</style>


  <div id="background" >
  <div  style="margin-top: 100px; font-family:Arial, Helvetica, sans-serif; font-size: 35px;">
  <center><b>註冊</b></center>
  <hr id="line"></hr>
  </div>

   <div  style="margin-top: 30px; font-family:Arial, Helvetica, sans-serif;">
   <center><label>姓名:</label>
   <input id="username" type="text" class="draw">
   </center>
   </div>
  
   <div  style="margin-top: 30px; font-family:Arial, Helvetica, sans-serif;">
   <center><label>信箱:</label>
   <input id="email" type="email" class="draw">
   </center>
   </div>

   <div  style="margin-top: 30px;  font-family:Arial, Helvetica, sans-serif;">
   <center><label>帳號:</label>
   <input id="userid" type="text" class="draw">
   </center>
   </div>

   <div  style="margin-top: 30px; font-family:Arial, Helvetica, sans-serif;">
   <center><label>密碼:</label>
   <input id="password" type="password" class="draw">
   </center>
   </div>

   <div class="button"style="margin-top: 30px;">
   <center>
   <button id="login" type="button" onclick="putdata()" style="font-size: 20px; background-color: transparent; border-radius: 8px; border: 2px solid rgba(105,105,105,0.6);">註冊</button>
   </center>
  </div>
  </div>

<script>	
   var config = {
    apiKey: "AIzaSyAU8YeIiWcADYyZUuiUPkHsSEn0C8o7VzI",
    authDomain: "yunhsin-1753e.firebaseapp.com",
    databaseURL: "https://yunhsin-1753e.firebaseio.com",
    projectId: "yunhsin-1753e",
    storageBucket: "yunhsin-1753e.appspot.com",
    messagingSenderId: "266910483049"
  };
  firebase.initializeApp(config);   

  function putdata(){
                      var username = $('#username').val();
                      var email = $('#email').val();
                      var userid = $('#userid').val();
                      var password = $('#password').val();

                      var ref = firebase.database().ref("member");

                      if(username != "" && email != "" && userid != "" && password != "")
                      {
                        ref.on("value",(function(snapshot)
                        {
                          var buffer = snapshot.child(userid).val();
                          if(buffer == null)
                          {
                            let updates = {};
                            updates["member/"+userid+"/username"] = username;
                            updates["member/"+userid+"/userid"] = userid;
                            updates["member/"+userid+"/email"] = email;
                            updates["member/"+userid+"/password"] = password;
                            alert("註冊成功"); 
                            firebase.database().ref().update(updates); 
                          }
                          else
                          {              
                            alert("此帳號已被使用");
                          }
                        }))             
                      }
                      else
                      {
                        alert("請輸入完整資料");
                      }
                    };    
</script>
<p id="demo"></p>
</body>
</html>
